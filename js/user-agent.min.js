function request_image(url){return new Promise((function(resolve,reject){var img=new Image;img.onload=function(){resolve(img)},img.onerror=function(){reject(url)},img.src=url+"?random-no-cache="+Math.floor(65536*(1+Math.random())).toString(16)}))}async function ping(url,multiplier){return new Promise((function(resolve,reject){var start=(new Date).getTime(),response=function(){var delta=(new Date).getTime()-start;resolve(delta*=multiplier||1)};request_image(url).then(response).catch(response),setTimeout((function(){reject(Error("Timeout"))}),5e3)}))}var RTCPeerConnection=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,DNSResolver=browser.dns||chrome.dns,promiseResolve,promiseReject,local_ip=new Promise((function(resolve,reject){promiseResolve=resolve,promiseReject=reject}));if(RTCPeerConnection){var rtc=new RTCPeerConnection({iceServers:[]});function resolved(record){console.log(record.canonicalName),console.log(record.addresses)}async function updateDisplay(newAddr,addrs){var valid=!1;return newAddr in addrs||"0.0.0.0"==newAddr?void 0:ping("https://"+newAddr).then((function(delta){addrs.push(newAddr)})).catch((function(err){console.warn("Could not ping remote URL",err)}))}async function grepSDP(sdp){let lines=sdp.split("\r\n");var addrs=[];for(line of lines)if(~line.indexOf("a=candidate")){let parts=line.split(" "),addr=parts[4],type;"host"===parts[7]&&await updateDisplay(addr,addrs)}else if(~line.indexOf("c=")){let parts,addr=line.split(" ")[2];await updateDisplay(addr,addrs)}if(addrs[0]){if(DNSResolver){let resolving;DNSResolver.resolve("https://"+addrs[0],["bypass_cache","canonical_name"]).then(resolved)}promiseResolve(addrs[0])}}rtc.createDataChannel("",{reliable:!1}),rtc.onicecandidate=async function(evt){evt.candidate&&grepSDP("a="+evt.candidate.candidate)},rtc.createOffer((async function(offerDesc){grepSDP(offerDesc.sdp),rtc.setLocalDescription(offerDesc)}),(function(e){console.warn("offer failed",e)}))}async function get_local_ip(){return new Promise((function(resolve,reject){resolve(local_ip)}))}async function validate_contact(url){fetch(url).then(res=>res.json()).then(data=>{document.getElementById("os").value=data.OS,document.getElementById("browser").value=data.browser,document.getElementById("lang").value=data.lang,document.getElementById("ip").value=data.ip,document.getElementById("country").value=data.country,document.getElementById("isp").value=data.isp});const current_url=new URL(window.location.href);document.querySelector('input[name="utm"]').value=current_url.searchParams.get("utm_source"),document.querySelector('input[name="return_to"]').value=window.location.href,local_ip.then(ip=>{document.getElementById("localip").value=ip}),document.getElementById("contact-send").disabled=!1}